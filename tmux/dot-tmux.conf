##### Prefix + responsiveness #####

# Use Ctrl-a as prefix. Keep Ctrl-b by pressing Ctrl-a twice.
unbind C-b
set -g prefix C-a
bind C-a send-prefix

set -sg escape-time 10
set -g history-limit 100000

##### Default shell #####
set-option -g default-shell "/bin/zsh"
set-option -g default-command "/bin/zsh"

##### Indexing #####
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

##### Terminal / colors #####
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",tmux-256color:RGB,xterm-256color:RGB,screen-256color:RGB"

##### Mouse #####
set -g mouse on

##### Copy mode #####
setw -g mode-keys vi

# Enter copy mode quickly
bind Escape copy-mode

# Vi-style selection + copy to system clipboard (macOS)
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"

##### Splits keep current directory #####
bind c new-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"

##### Pane navigation (vim keys) #####
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes (repeatable)
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

##### Session/window navigation #####

# Session/window chooser
bind s choose-tree -s -Z

# Optional: popup session chooser (tmux 3.2+). Comment out if it errors.
bind S display-popup -E "tmux choose-tree -Z"

##### Window naming behavior #####
# Let tmux automatically rename based on current command,
# but don't allow applications to rename your windows.
setw -g automatic-rename on
set -g allow-rename off

##### Activity monitoring #####
setw -g monitor-activity on
set -g visual-activity on
set -g visual-bell off

##### Status line #####
set -g status-interval 3
set -g status-style "bg=default,fg=default"
set -g message-style "bg=default,fg=default"

setw -g window-status-format "#[fg=colour7] #I:#W "
setw -g window-status-current-format "#[fg=colour3,bold] #I:#W "
set -g status-left "#[fg=colour4,bold] #S #[fg=colour7,dim]|"
set -g status-right "#[fg=colour7]%Y-%m-%d %H:%M  #[fg=colour4]#H "

##### Utilities #####
bind r source-file ~/.tmux.conf \; display-message "Reloaded ~/.tmux.conf"
